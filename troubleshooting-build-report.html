<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Chapter 23 Troubleshooting Build Report | Bioconductor Packages: Development, Maintenance, and Peer Review</title>
<meta name="author" content="Kevin Rue-Albrecht">
<meta name="author" content="Daniela Cassol">
<meta name="author" content="Johannes Rainer">
<meta name="author" content="Lori Shepherd">
<meta name="description" content="23.1 How and when does the BBS pull? When will my changes propagate? Please remember the daily builder pulls, installs, builds, and checks package only once per day. This process starts around...">
<meta name="generator" content="bookdown 0.29 with bs4_book()">
<meta property="og:title" content="Chapter 23 Troubleshooting Build Report | Bioconductor Packages: Development, Maintenance, and Peer Review">
<meta property="og:type" content="book">
<meta property="og:description" content="23.1 How and when does the BBS pull? When will my changes propagate? Please remember the daily builder pulls, installs, builds, and checks package only once per day. This process starts around...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Chapter 23 Troubleshooting Build Report | Bioconductor Packages: Development, Maintenance, and Peer Review">
<meta name="twitter:description" content="23.1 How and when does the BBS pull? When will my changes propagate? Please remember the daily builder pulls, installs, builds, and checks package only once per day. This process starts around...">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.4.0/transition.js"></script><script src="libs/bs3compat-0.4.0/tabs.js"></script><script src="libs/bs3compat-0.4.0/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Bioconductor Packages: Development, Maintenance, and Peer Review</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">Welcome</a></li>
<li class="book-part">Package Submissions</li>
<li><a class="" href="submission-overview.html">Overview</a></li>
<li><a class="" href="bioconductor-package-submissions.html"><span class="header-section-number">1</span> Bioconductor Package Submissions</a></li>
<li class="book-part">Package Development Guidelines</li>
<li><a class="" href="develop-overview.html">Overview</a></li>
<li><a class="" href="package-name.html"><span class="header-section-number">2</span> Package name</a></li>
<li><a class="" href="general.html"><span class="header-section-number">3</span> General Bioconductor Package Development</a></li>
<li><a class="" href="important-bioconductor-package-development-features.html"><span class="header-section-number">4</span> Important Bioconductor Package Development Features</a></li>
<li><a class="" href="readme.html"><span class="header-section-number">5</span> The README file</a></li>
<li><a class="" href="description.html"><span class="header-section-number">6</span> The DESCRIPTION file</a></li>
<li><a class="" href="namespace.html"><span class="header-section-number">7</span> The NAMESPACE file</a></li>
<li><a class="" href="news.html"><span class="header-section-number">8</span> The NEWS file</a></li>
<li><a class="" href="license.html"><span class="header-section-number">9</span> The LICENSE file</a></li>
<li><a class="" href="citation.html"><span class="header-section-number">10</span> The CITATION file</a></li>
<li><a class="" href="sysdep.html"><span class="header-section-number">11</span> The INSTALL file</a></li>
<li><a class="" href="docs.html"><span class="header-section-number">12</span> Documentation</a></li>
<li><a class="" href="data.html"><span class="header-section-number">13</span> Package data</a></li>
<li><a class="" href="tests.html"><span class="header-section-number">14</span> Unit tests</a></li>
<li><a class="" href="r-code.html"><span class="header-section-number">15</span> R code</a></li>
<li><a class="" href="other-than-Rcode.html"><span class="header-section-number">16</span> Fortran / C / C++ / Python / Third-Party Code</a></li>
<li><a class="" href="shiny.html"><span class="header-section-number">17</span> Shiny apps</a></li>
<li><a class="" href="non-software.html"><span class="header-section-number">18</span> Non-Software Packages</a></li>
<li><a class="" href="gitignore.html"><span class="header-section-number">19</span> The .gitignore file</a></li>
<li><a class="" href="conclusion.html"><span class="header-section-number">20</span> Conclusion</a></li>
<li class="book-part">Bioconductor Package Maintenance</li>
<li><a class="" href="package-maintenance.html">Overview</a></li>
<li><a class="" href="git-version-control.html"><span class="header-section-number">21</span> Git Version Control</a></li>
<li><a class="" href="versionnum.html"><span class="header-section-number">22</span> Version Numbering</a></li>
<li><a class="active" href="troubleshooting-build-report.html"><span class="header-section-number">23</span> Troubleshooting Build Report</a></li>
<li><a class="" href="debugging-cc-code.html"><span class="header-section-number">24</span> Debugging C/C++ code</a></li>
<li><a class="" href="deprecation.html"><span class="header-section-number">25</span> Deprecation Guidelines</a></li>
<li><a class="" href="package-end-of-life-policy.html"><span class="header-section-number">26</span> Package End of Life Policy</a></li>
<li class="book-part">Package Reviewer Resources</li>
<li><a class="" href="reviewer-resources-overview.html">Overview</a></li>
<li><a class="" href="review-expectation.html"><span class="header-section-number">27</span> Review Expectations</a></li>
<li><a class="" href="reviewtools.html"><span class="header-section-number">28</span> Reviewer Resources and Tools</a></li>
<li><a class="" href="review-volunteer-chapter.html"><span class="header-section-number">29</span> Volunteer to Review</a></li>
<li class="book-part">Appendix</li>
<li><a class="" href="use-devel.html"><span class="header-section-number">A</span> Using the ‘Devel’ Version of Bioconductor</a></li>
<li><a class="" href="long-tests.html"><span class="header-section-number">B</span> Long Tests</a></li>
<li><a class="" href="querying-web-resources.html"><span class="header-section-number">C</span> Querying Web Resources</a></li>
<li><a class="" href="c-fortran.html"><span class="header-section-number">D</span> C and Fortran code</a></li>
<li><a class="" href="cmavericks-best-practices.html"><span class="header-section-number">E</span> C++/Mavericks Best Practices</a></li>
<li><a class="" href="man-links.html"><span class="header-section-number">F</span> Debug: Links in Rd files</a></li>
<li><a class="" href="booknews.html"><span class="header-section-number">G</span> NEWS</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/Bioconductor/pkgrevdocs">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="troubleshooting-build-report" class="section level1" number="23">
<h1>
<span class="header-section-number">23</span> Troubleshooting Build Report<a class="anchor" aria-label="anchor" href="#troubleshooting-build-report"><i class="fas fa-link"></i></a>
</h1>
<div id="propagate" class="section level2" number="23.1">
<h2>
<span class="header-section-number">23.1</span> How and when does the BBS pull? When will my changes propagate?<a class="anchor" aria-label="anchor" href="#propagate"><i class="fas fa-link"></i></a>
</h2>
<p>Please remember the daily builder pulls, installs, builds, and checks package
only once per day. This process starts around 2:30 PM (14:30) EST everyday
(i.e., <a href="https://everytimezone.com/s/f44eab0b">UTC−05:00</a>).
Changes pushed to Bioconductor before 2:30 will be reflected in the following
day’s build report that is posted around 11:30 AM EST. The build report has
a time stamp at the top of the page when it was generated. Changes after
2:30 PM EST will not be reflect until the day after tomorrow, therefore
possibly taking up to 36-48 hours. The build reports for
<a href="https://bioconductor.org/checkResults/devel/bioc-LATEST/">devel</a> and <a href="https://bioconductor.org/checkResults/release/bioc-LATEST/">release</a> show
the package version and commit id that is being reflected for that build.
The <a href="http://bioconductor.org/packages/release/BiocViews.html">landing pages for packages</a> (e.g.,
<em><a href="https://bioconductor.org/packages/3.16/Biobase">Biobase</a></em>)
will not be updated until the package installs/build/checks without ERROR; We
do not propagate broken packages. This could account for a different version on
the landing page than was pushed to <em>Bioconductor</em>. Please also remember a
package ALWAYS needs a valid version bump to propagate to users.</p>
<p>The schedule for software, data experiment, annotation, books, workflows can be
found on the <a href="http://bioconductor.org/checkResults/">check results page</a>. In
order for changes to be included in the report, changes should be committed to
the Bioconductor git.bioconductor.org location the morning before the listed day
with a valid version bump.</p>
</div>
<div id="how-do-i-reproduce-the-build-system-error" class="section level2" number="23.2">
<h2>
<span class="header-section-number">23.2</span> How do I reproduce the build system ERROR?<a class="anchor" aria-label="anchor" href="#how-do-i-reproduce-the-build-system-error"><i class="fas fa-link"></i></a>
</h2>
<p>In order to reproduce the ERROR’s accuately locally, remember to be using the
correct version of R and Bioconductor. The version of R used for the build
report can be found at the top of the <a href="https://bioconductor.org/checkResults/release/bioc-LATEST/">release</a> and
<a href="https://bioconductor.org/checkResults/devel/bioc-LATEST/">devel</a> build reports. Once you are using the
correct version of R make sure all your packages are up-to-date with
<code><a href="https://rdrr.io/pkg/BiocManager/man/valid.html">BiocManager::valid()</a></code> and <code><a href="https://rdrr.io/pkg/BiocManager/man/install.html">BiocManager::install()</a></code>. There are some additional
environment variables the daily builder uses during <code>R CMD check</code>. Those are the
following:</p>
<pre><code>export _R_CHECK_EXECUTABLES_=false
export _R_CHECK_EXECUTABLES_EXCLUSIONS_=false
export _R_CHECK_LENGTH_1_CONDITION_=package:_R_CHECK_PACKAGE_NAME_,abort,verbose
export _R_CHECK_LENGTH_1_LOGIC2_=package:_R_CHECK_PACKAGE_NAME_,abort,verbose
export _R_CHECK_S3_METHODS_NOT_REGISTERED_=true</code></pre>
<p>The Single Package build has some extra
<a href="general.html#r-cmd-check-environment">documentation</a>
about how to set up your local system to use optional environment
variables. Please note that if you look at the file listed on this page, it has
many additional variables; <em>Bioconductor</em> does a much more stringent check on
incoming packages than on the daily builder (for now). You are welcome to use
this file if you wish as it is a more comprehensive check but the above listed
environment variables should be included minimally.</p>
<p>Another option to debug and test is to utilize the <em>Bioconductor</em> docker
image. The documentation for using docker images can be found
<a href="https://bioconductor.org/help/docker/">here</a>. The docker image does contain the
environment variable setting found on the daily builder.</p>
</div>
<div id="common-build-report-errors" class="section level2" number="23.3">
<h2>
<span class="header-section-number">23.3</span> Common Build Report Errors<a class="anchor" aria-label="anchor" href="#common-build-report-errors"><i class="fas fa-link"></i></a>
</h2>
<p>Often common Error’s will arise as R develops and matures or as Bioconductor
packages are modified and advance. This document provides some guidance on Error’s
and potential solutions.</p>
<ul>
<li><a href="troubleshooting-build-report.html#bioc-311">Bioconductor 3.11 with R 4.0</a></li>
</ul>
</div>
<div id="bioc-311" class="section level2" number="23.4">
<h2>
<span class="header-section-number">23.4</span> Bioconductor 3.11 with R 4.0<a class="anchor" aria-label="anchor" href="#bioc-311"><i class="fas fa-link"></i></a>
</h2>
<p>R switched from 3.x to 4.0 which generally means some significant changes.</p>
<ul>
<li><a href="troubleshooting-build-report.html#s3method">S3 method registration</a></li>
<li><a href="troubleshooting-build-report.html#rcmdconfig">Removed Settings in R CMD config</a></li>
<li><a href="troubleshooting-build-report.html#condLen">Conditional length &gt; 1</a></li>
<li><a href="troubleshooting-build-report.html#scalarvec">Scalar / Vector Logic</a></li>
<li>
<a href="troubleshooting-build-report.html#classEq">Class == vs is/inherits</a>
<ul>
<li><a href="#matarr">Matrix is now Array</a></li>
</ul>
</li>
<li><a href="troubleshooting-build-report.html#stringsAsFactors">data.frame stringAsFactors</a></li>
<li><a href="troubleshooting-build-report.html#statsSmoothEnds">stats::smoorthEnds</a></li>
<li><a href="troubleshooting-build-report.html#grid">grid package changes</a></li>
<li><a href="troubleshooting-build-report.html#plot">plot generic moved</a></li>
<li><a href="troubleshooting-build-report.html#partMatch">Partial Argument Matching</a></li>
<li><a href="troubleshooting-build-report.html#invalidUTF">Invalid UTF-8</a></li>
<li><a href="troubleshooting-build-report.html#dep311">Dependency Issues</a></li>
<li><a href="troubleshooting-build-report.html#depFun311">Deprecated Functions</a></li>
</ul>
<div id="s3method" class="section level3" number="23.4.1">
<h3>
<span class="header-section-number">23.4.1</span> S3 method registration<a class="anchor" aria-label="anchor" href="#s3method"><i class="fas fa-link"></i></a>
</h3>
<p>Many packages are currently failing because of undeclared S3 methods in the
NAMESPACE. There is some background information found on the R developers blog
post: <a href="https://developer.r-project.org/Blog/public/2019/08/19/s3-method-lookup/index.html">S3 Method
Lookup</a></p>
<p>This ERROR takes many different forms on the build report. Some of the more
common forms include</p>
<ul>
<li>Cannot coerce class &lt;structure&gt; to a data.frame</li>
<li>Cannot coerce type ‘S4’ to vector of type ‘double’</li>
<li>No applicable method for &lt;foo&gt; applied to an object of
class &lt;bar&gt;</li>
<li>‘X’ is a list, but does not have components ‘x’ and ‘y’</li>
<li>Error in colMeans(x, na.rm = TRUE) : ‘x’ must be numeric</li>
<li>Error in RG<span class="math display">\[1:2, \]</span> : incorrect number of dimensions</li>
<li>formal argument &lt;foo&gt; matched by multiple actual arguments</li>
<li>object &lt;foo&gt; of mode ‘function’ was not found</li>
<li>‘x’ and ‘y’ lengths differ</li>
</ul>
<p><b>Solution:</b> Register the S3 method in the NAMESPACE</p>
<pre><code>S3method(&lt;function&gt;, &lt;dispatch&gt;)</code></pre>
<p>A simple example which effects many packages is a S3 plotting method.
The following line would be added to the package NAMESPACE.</p>
<pre><code>S3method(plot, TCC)  # example from TCC package</code></pre>
</div>
<div id="rcmdconfig" class="section level3" number="23.4.2">
<h3>
<span class="header-section-number">23.4.2</span> Removed Setting in R CMD config<a class="anchor" aria-label="anchor" href="#rcmdconfig"><i class="fas fa-link"></i></a>
</h3>
<p>The source of the ERROR is utilizing settings in package configure script that
have been removed or replaced.
There is a section of R NEWS “R CMD config no longer knows about the unused
settings F77 and FCPIFCPLAGS, nor CXX98 and similar.”
Executing the configuration script when installing the package fails, and the
output contains lot of messages along the lines of the following:</p>
<ul>
<li>configure: WARNING: The flags FFLAGS=“” do not work</li>
<li>checking whether the ERROR: no information for variable ‘F77’</li>
<li>configure: WARNING: This value for FFLAGS does not work.</li>
</ul>
<p><b>Solution:</b> Replace instances of “<code>${R} CMD config F77</code>” with “<code>${R} CMD config FC</code>”</p>
</div>
<div id="condLen" class="section level3" number="23.4.3">
<h3>
<span class="header-section-number">23.4.3</span> Conditional Length &gt; 1<a class="anchor" aria-label="anchor" href="#condLen"><i class="fas fa-link"></i></a>
</h3>
<p>In R 4.0 a conditional with a length greater than 1 will produce a WARNING. On
the Bioconductor Daily Builder and Single Package Builder this is increased to
an ERROR.</p>
<p>Traditionally <code>if / while</code> statements could accept vectors using the first
element as the conditional value and ignoring the remaining values. This now
produces a WARNING as seem in this dummy example and documented at
<a href="https://developer.r-project.org/Blog/public/2018/10/12/conditions-of-length-greater-than-one/index.html">Conditions of Length Greater Than One</a></p>
<pre><code>&gt; if (c(TRUE, FALSE)) {}
NULL
Warning message:
In if (c(TRUE, FALSE)) { :
    the condition has length &gt; 1 and only the first element will be used</code></pre>
<p><b>Solution:</b>
Bioconductor increased the severity as in most cases this is a misjudgment in
the length of the argument rather than intentional. The code should be reviewed
to see if argument is being assigned correctly. In most cases it might be
appropriate to use an <code><a href="https://rdrr.io/r/base/any.html">any( )</a></code> or <code><a href="https://rdrr.io/r/base/all.html">all( )</a></code> surrounding the vector.</p>
<p>See also <a href="https://stat.ethz.ch/pipermail/bioc-devel/2020-January/016081.html">mailing list
post</a></p>
</div>
<div id="scalarvec" class="section level3" number="23.4.4">
<h3>
<span class="header-section-number">23.4.4</span> Scalar / Vector Logic<a class="anchor" aria-label="anchor" href="#scalarvec"><i class="fas fa-link"></i></a>
</h3>
<p>This is not a change in R yet but we have been notified that it is forth coming
and have escalated to an ERROR on our daily builders in preparation. This type
of ERROR occurs with the misuse of <code>&amp;&amp;</code> and <code>||</code>. The double <code>&amp;&amp;</code> and <code>||</code>
imply a scalar comparison rather than a vector comparison that the singular <code>&amp;</code>
and <code>|</code> expect. See the dummy example below:</p>
<pre><code>&gt; c(TRUE, TRUE) &amp;&amp; TRUE
Error in c(TRUE, TRUE) &amp;&amp; TRUE :
   'length(x) = 2 &gt; 1' in coercion to 'logical(1)'</code></pre>
<p><b>Solution:</b>
Most cases are misjudgment and misunderstanding of the use of a scalar
comparison from a vector comparison. Changing the double <code>&amp;&amp;</code> / <code>||</code> to a singular
<code>&amp;</code> / <code>|</code> will generally be sufficient if a vector comparison is intended or having the vector argument use an
appropriate <code><a href="https://rdrr.io/r/base/any.html">any( )</a></code> or <code><a href="https://rdrr.io/r/base/all.html">all( )</a></code> surrounding the vector will result in the
appropriate scalar comparison. <strong>Note:</strong> If this comparison is in a conditional
please see the section above; <code><a href="https://rdrr.io/r/base/any.html">any( )</a></code> or <code><a href="https://rdrr.io/r/base/all.html">all( )</a></code> will most likely be a better alternative.</p>
<p>See also <a href="https://stat.ethz.ch/pipermail/bioc-devel/2020-January/016081.html">mailing list post</a></p>
</div>
<div id="classEq" class="section level3" number="23.4.5">
<h3>
<span class="header-section-number">23.4.5</span> Class == vs is/inherits<a class="anchor" aria-label="anchor" href="#classEq"><i class="fas fa-link"></i></a>
</h3>
<p>While this isn’t a change in R / Bioconductor as of yet, there is strong discussion
about the affects and consequences of this code structure. A better discussion
and explanation can be found <a href="https://developer.r-project.org/Blog/public/2019/11/09/when-you-think-class.-think-again/index.html">When you think <code>class(.) == *</code>, think again!</a></p>
<p>The sum up is <code>class( x ) == "foo"</code> should be avoided. It can be misleading if classes extend other classes. The
better option is to use <code>is( x , "foo")</code> or <code>inherits(x, "foo")</code>.</p>
<p>This is also advised in <a href="r-code.html#r-code-best-practices-and-guidelines">Bioconductor best practices</a></p>
<p><a name="matarr"></a></p>
<p>Starting in R 4.0, a matrix is considered an extension of array.</p>
<pre><code>&gt; m = matrix()
&gt; class(m)
[1] "matrix" "array"

&gt; class(m) == "matrix"
[1]  TRUE FALSE
&gt; if ( class(m) == "matrix"){}
Error in if (class(m) == "matrix") { : the condition has length &gt; 1</code></pre>
<p>This change along with the previous section regarding conditional length results
in many errors where users were doing something along the lines of <code>if (class(m) == "matrix")</code>; This is an excellent example where the following is
the appropriate change <code>if(is(m, "matrix"))</code> or <code>if(inherits(m, "matrix"))</code> or
<code>if(is.matrix(m))</code>.</p>
<p>Another common ERROR now occurring because of this change is something similar
to the following:</p>
<pre><code>Error in vapply(experiments(object), class, character(1)) :
  values must be length 1,
 but FUN(X[[4]]) result is length 2</code></pre>
</div>
<div id="stringsAsFactors" class="section level3" number="23.4.6">
<h3>
<span class="header-section-number">23.4.6</span> data.frame stringsAsFactors<a class="anchor" aria-label="anchor" href="#stringsAsFactors"><i class="fas fa-link"></i></a>
</h3>
<p>In R 4.0, the default for data.frame argument <code>stringsAsFactors</code> changed from
TRUE to FALSE. This changes is causing the most breakage in tests where there
are checks for particular factor levels or constructing factor levels.
The ERROR’s take many different forms. The simple solution is to change or add
the <code>stringAsFactors=TRUE</code> to the data.frame call, however maintainers may want
to re-evaluate code for potential restructuring or ease of use.</p>
</div>
<div id="statsSmoothEnds" class="section level3" number="23.4.7">
<h3>
<span class="header-section-number">23.4.7</span> stats::smoothEnds<a class="anchor" aria-label="anchor" href="#statsSmoothEnds"><i class="fas fa-link"></i></a>
</h3>
<p>A recent change to <code><a href="https://rdrr.io/r/stats/smoothEnds.html">stats::smoothEnds()</a></code>, now returns an integer vector with the
input is an integer vector. Previously it could return a number vector.</p>
<p>Example R 3.6.3</p>
<pre><code>&gt; class(smoothEnds(c(401:403)))
[1] "integer"
&gt; class(smoothEnds(c(401:403, 555L)))
[1] "numeric"</code></pre>
<p>Example from 4.0.0</p>
<pre><code>&gt; class(smoothEnds(c(401:403)))
[1] "integer"
&gt; class(smoothEnds(c(401:403, 555L)))
[1] "integer"</code></pre>
<p>This has the potential to cause ERROR’s if a class type was checked.</p>
</div>
<div id="grid" class="section level3" number="23.4.8">
<h3>
<span class="header-section-number">23.4.8</span> Grid package changes<a class="anchor" aria-label="anchor" href="#grid"><i class="fas fa-link"></i></a>
</h3>
<p>We do not have a lot of specifics on what has changed but were notified by
email. Important sections of the email as follows:</p>
<pre><code>    I am about to commit some internal changes to 'grid' units
        (for, in some cases, 100x speed-up of unit operations).
        A number of packages have already been fixed to work with these
        changes, but, according to my testing, the following CRAN
        packages will still fail R CMD check.
    Some of those are cascades ('armada', 'countToFPKM', and 'wilson'
        from 'ComplexHeatmap' - see below - and 'fingertipscharts' from 'lemon'
        and 'xpose' is actually a 'ggforce' problem), but all of the other
        package authors have been notified and several are already working on
        fixes.
        The most serious of those is 'ComplexHeatmap' because it causes multiple
        follow-on failures, the CRAN ones above and others on BioConductor:
    Again, the main package authors have been notified and the
    'ComplexHeatmap' author is working on an update.</code></pre>
</div>
<div id="plot" class="section level3" number="23.4.9">
<h3>
<span class="header-section-number">23.4.9</span> plot generic moved<a class="anchor" aria-label="anchor" href="#plot"><i class="fas fa-link"></i></a>
</h3>
<p>The plot generic has moved from graphics to base. The ERROR’s seen from this
change are non specific and can take many forms. Some of the ERROR’s we see
are</p>
<pre><code>Error in getGeneric(f, TRUE, envir, package) :
 no generic function found for 'plot'</code></pre>
<p>or</p>
<pre><code>Error in as.double(y) :
      cannot coerce type 'S4' to vector of type 'double'
</code></pre>
<p>The explanation given:</p>
<pre><code>  “The namespace controls the search strategy for variables used by
  functions in the package. If not found locally, R searches the package
  namespace first, then the imports, then the base namespace and then  the
  normal search path." as per
  https://cran.r-project.org/doc/manuals/r-devel/R-exts.html#Package-namespaces):

  CRAN and Bioconductor  had a few packages that "worked" because the right
  plot() was found in the normal search path, but now fail because it's
  calling the one in base instead.</code></pre>
</div>
<div id="partMatch" class="section level3" number="23.4.10">
<h3>
<span class="header-section-number">23.4.10</span> Partial Argument Matching<a class="anchor" aria-label="anchor" href="#partMatch"><i class="fas fa-link"></i></a>
</h3>
<p>There is now more strict checking of argument matching with regards to partial
argument matching. Best described with the following example</p>
<pre><code>setGeneric(“mycoolfunction”,   function(object,  breaks)
    standardGeneric(“mycoolfunction”)
setMethod(“mycoolfunction”,
    signature=c(object=”GRanges”, break=”GRanges”),
    &lt;code&gt;)</code></pre>
<p>Notice the generic uses <code>breaks</code> while the setMethod uses <code><a href="https://rdrr.io/r/base/Control.html">break</a></code>; This is an
example of a partial argument match that will no longer be valid.</p>
<p>Partial argument matching when envoking functions should also be avoided as
part of best practices. For example</p>
<pre><code>mycoolfunction &lt;- function( x, myargum, secondarg ) { code }

mycoolfunction(x=2, myar=1:2, second=3)          # BAD Coding!

mycoolfunction(x=2, myargum=1:2, secondarg=3)    # Good Practice!</code></pre>
</div>
<div id="invalidUTF" class="section level3" number="23.4.11">
<h3>
<span class="header-section-number">23.4.11</span> Package inputenc Error: Invalid UTF-8<a class="anchor" aria-label="anchor" href="#invalidUTF"><i class="fas fa-link"></i></a>
</h3>
<p>This ERROR started to appear on tokay2 (windows) in Spring 2020. We are not sure
the exact source of the ERROR (change in MiKTek, Change in R, other?) but the
solution is simple:</p>
<p>Please place <code>\usepackage[utf8]{inputenc}</code> in the beginning of your Sweave
vignette right after the <code>\documentclass</code> line.</p>
</div>
<div id="dep311" class="section level3" number="23.4.12">
<h3>
<span class="header-section-number">23.4.12</span> Dependency Issues<a class="anchor" aria-label="anchor" href="#dep311"><i class="fas fa-link"></i></a>
</h3>
<p>Dependency Issues can fall into a few sub-categories:</p>
<div id="cran-binaries-not-available-for-r-4.0" class="section level4" number="23.4.12.1">
<h4>
<span class="header-section-number">23.4.12.1</span> CRAN binaries not available for R 4.0<a class="anchor" aria-label="anchor" href="#cran-binaries-not-available-for-r-4.0"><i class="fas fa-link"></i></a>
</h4>
<p>The fall cycle of Bioconductor uses R-devel in preparation for the new release of
R in the spring. This is always a slightly more disruptive cycle with regards to
package dependencies from CRAN. CRAN over the next 6 months leading up to the new release of R
will make binaries for Windows and MacOS available. As they become available the
Bioconductor builders will automatically add these binaries. If the binaries have
not been created yet, they will be unavailable and result in a <code>package not available error</code>. Bioconductor will not go to extra efforts to find work around to install
these packages; when they are available, they will be added.
<b>Solution:</b> Please be patient!</p>
</div>
<div id="package-have-been-removed-from-cran" class="section level4" number="23.4.12.2">
<h4>
<span class="header-section-number">23.4.12.2</span> Package have been removed from CRAN<a class="anchor" aria-label="anchor" href="#package-have-been-removed-from-cran"><i class="fas fa-link"></i></a>
</h4>
<p>CRAN packages are occasionally removed. Unfortunately, Bioconductor will only
allow package dependencies to be actively maintained packages on CRAN or Bioconductor.
A package will have to alter their package to not utilize code and not rely on this
dependency. You may of course try to pentition CRAN for reinstatement or reach
out to the package maintainer to fix and submit to CRAN. Good Luck!</p>
</div>
<div id="package-has-been-removed-from-bioconductor" class="section level4" number="23.4.12.3">
<h4>
<span class="header-section-number">23.4.12.3</span> Package has been removed from Bioconductor<a class="anchor" aria-label="anchor" href="#package-has-been-removed-from-bioconductor"><i class="fas fa-link"></i></a>
</h4>
<p>We try to be more aware of orphaned packages and packages that remain broken for
extended periods of time. Package deprecation and removal occurs and packages
will have to alter to not utilize code from these packages or could potential
offer to take over maintenance of broken packages but that would require original
maintainers permission. Bioconductor Package deprecation is announced throughout
the release cycle on the mailing list and support site to try and allow dependent
packages time to adjust code before removal. This release the most
notable maintainer requested deprecation from 3.10 (therefore removed in 3.11) are
SNPchip and GenomeGraphs. A full list of deprecated packages can be found
<a href="https://support.bioconductor.org/p/125352/">List of Deprecated Packages 3.10</a>.
We also documented removed packages on our <a href="https://bioconductor.org/about/removed-packages/">Removed Package Page</a></p>
</div>
</div>
<div id="depFun311" class="section level3" number="23.4.13">
<h3>
<span class="header-section-number">23.4.13</span> Deprecated Functions<a class="anchor" aria-label="anchor" href="#depFun311"><i class="fas fa-link"></i></a>
</h3>
<p>Functions can be deprecated, defunct, and eventually removed. Bioconductor tries
to enforce this progression to allow maintainers to adjust code. Most deprecated
or defunct functions will (should) suggest the alternative. The following are
noted in Bioconductor 3.11</p>
<div id="rangeddata" class="section level4" number="23.4.13.1">
<h4>
<span class="header-section-number">23.4.13.1</span> RangedData<a class="anchor" aria-label="anchor" href="#rangeddata"><i class="fas fa-link"></i></a>
</h4>
<pre><code>Error : RangedData objects are defunct. Please migrate your code to use GRanges
  or GRangesList objects instead. See IMPORTANT NOTE in ?RangedData</code></pre>
</div>
<div id="normalize" class="section level4" number="23.4.13.2">
<h4>
<span class="header-section-number">23.4.13.2</span> Normalize<a class="anchor" aria-label="anchor" href="#normalize"><i class="fas fa-link"></i></a>
</h4>
<pre><code>Error:
'normalize' is defunct.
Use ''normalize,SingleCellExperiment-method' is defunct.
Use 'logNormCounts' instead' instead.</code></pre>
</div>
<div id="calculateqcmetrics" class="section level4" number="23.4.13.3">
<h4>
<span class="header-section-number">23.4.13.3</span> calculateQCMetrics<a class="anchor" aria-label="anchor" href="#calculateqcmetrics"><i class="fas fa-link"></i></a>
</h4>
<pre><code>Error:
'calculateQCMetrics' is defunct.
Use 'perCellQCMetrics' instead.</code></pre>

</div>
</div>
</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="versionnum.html"><span class="header-section-number">22</span> Version Numbering</a></div>
<div class="next"><a href="debugging-cc-code.html"><span class="header-section-number">24</span> Debugging C/C++ code</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#troubleshooting-build-report"><span class="header-section-number">23</span> Troubleshooting Build Report</a></li>
<li><a class="nav-link" href="#propagate"><span class="header-section-number">23.1</span> How and when does the BBS pull? When will my changes propagate?</a></li>
<li><a class="nav-link" href="#how-do-i-reproduce-the-build-system-error"><span class="header-section-number">23.2</span> How do I reproduce the build system ERROR?</a></li>
<li><a class="nav-link" href="#common-build-report-errors"><span class="header-section-number">23.3</span> Common Build Report Errors</a></li>
<li>
<a class="nav-link" href="#bioc-311"><span class="header-section-number">23.4</span> Bioconductor 3.11 with R 4.0</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#s3method"><span class="header-section-number">23.4.1</span> S3 method registration</a></li>
<li><a class="nav-link" href="#rcmdconfig"><span class="header-section-number">23.4.2</span> Removed Setting in R CMD config</a></li>
<li><a class="nav-link" href="#condLen"><span class="header-section-number">23.4.3</span> Conditional Length &gt; 1</a></li>
<li><a class="nav-link" href="#scalarvec"><span class="header-section-number">23.4.4</span> Scalar / Vector Logic</a></li>
<li><a class="nav-link" href="#classEq"><span class="header-section-number">23.4.5</span> Class == vs is/inherits</a></li>
<li><a class="nav-link" href="#stringsAsFactors"><span class="header-section-number">23.4.6</span> data.frame stringsAsFactors</a></li>
<li><a class="nav-link" href="#statsSmoothEnds"><span class="header-section-number">23.4.7</span> stats::smoothEnds</a></li>
<li><a class="nav-link" href="#grid"><span class="header-section-number">23.4.8</span> Grid package changes</a></li>
<li><a class="nav-link" href="#plot"><span class="header-section-number">23.4.9</span> plot generic moved</a></li>
<li><a class="nav-link" href="#partMatch"><span class="header-section-number">23.4.10</span> Partial Argument Matching</a></li>
<li><a class="nav-link" href="#invalidUTF"><span class="header-section-number">23.4.11</span> Package inputenc Error: Invalid UTF-8</a></li>
<li><a class="nav-link" href="#dep311"><span class="header-section-number">23.4.12</span> Dependency Issues</a></li>
<li><a class="nav-link" href="#depFun311"><span class="header-section-number">23.4.13</span> Deprecated Functions</a></li>
</ul>
</li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/Bioconductor/pkgrevdocs/blob/master/troubleshoot-build-report.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/Bioconductor/pkgrevdocs/edit/master/troubleshoot-build-report.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Bioconductor Packages: Development, Maintenance, and Peer Review</strong>" was written by Kevin Rue-Albrecht, Daniela Cassol, Johannes Rainer, Lori Shepherd. It was last built on 2022-09-16.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
