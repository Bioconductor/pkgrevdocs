<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Chapter 17 Shiny apps | Bioconductor Packages: Development, Maintenance, and Peer Review</title>
<meta name="author" content="Kevin Rue-Albrecht">
<meta name="author" content="Daniela Cassol">
<meta name="author" content="Johannes Rainer">
<meta name="author" content="Lori Shepherd">
<meta name="description" content="Shiny apps can be submitted to Bioconductor as software packages or as documented and tested functions within packages.  17.1 Code organisation Shiny apps are divided into two parts: User...">
<meta name="generator" content="bookdown 0.33 with bs4_book()">
<meta property="og:title" content="Chapter 17 Shiny apps | Bioconductor Packages: Development, Maintenance, and Peer Review">
<meta property="og:type" content="book">
<meta property="og:description" content="Shiny apps can be submitted to Bioconductor as software packages or as documented and tested functions within packages.  17.1 Code organisation Shiny apps are divided into two parts: User...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Chapter 17 Shiny apps | Bioconductor Packages: Development, Maintenance, and Peer Review">
<meta name="twitter:description" content="Shiny apps can be submitted to Bioconductor as software packages or as documented and tested functions within packages.  17.1 Code organisation Shiny apps are divided into two parts: User...">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.4.2/transition.js"></script><script src="libs/bs3compat-0.4.2/tabs.js"></script><script src="libs/bs3compat-0.4.2/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Bioconductor Packages: Development, Maintenance, and Peer Review</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">Welcome</a></li>
<li class="book-part">Package Submissions</li>
<li><a class="" href="submission-overview.html">Overview</a></li>
<li><a class="" href="bioconductor-package-submissions.html"><span class="header-section-number">1</span> Bioconductor Package Submissions</a></li>
<li class="book-part">Package Development Guidelines</li>
<li><a class="" href="develop-overview.html">Overview</a></li>
<li><a class="" href="package-name.html"><span class="header-section-number">2</span> Package name</a></li>
<li><a class="" href="general.html"><span class="header-section-number">3</span> General Bioconductor Package Development</a></li>
<li><a class="" href="important-bioconductor-package-development-features.html"><span class="header-section-number">4</span> Important Bioconductor Package Development Features</a></li>
<li><a class="" href="readme.html"><span class="header-section-number">5</span> The README file</a></li>
<li><a class="" href="description.html"><span class="header-section-number">6</span> The DESCRIPTION file</a></li>
<li><a class="" href="namespace.html"><span class="header-section-number">7</span> The NAMESPACE file</a></li>
<li><a class="" href="news.html"><span class="header-section-number">8</span> The NEWS file</a></li>
<li><a class="" href="license.html"><span class="header-section-number">9</span> The LICENSE file</a></li>
<li><a class="" href="citation.html"><span class="header-section-number">10</span> The CITATION file</a></li>
<li><a class="" href="sysdep.html"><span class="header-section-number">11</span> The INSTALL file</a></li>
<li><a class="" href="docs.html"><span class="header-section-number">12</span> Documentation</a></li>
<li><a class="" href="data.html"><span class="header-section-number">13</span> Package data</a></li>
<li><a class="" href="tests.html"><span class="header-section-number">14</span> Unit tests</a></li>
<li><a class="" href="r-code.html"><span class="header-section-number">15</span> R code</a></li>
<li><a class="" href="other-than-Rcode.html"><span class="header-section-number">16</span> Fortran / C / C++ / Python / Third-Party Code</a></li>
<li><a class="active" href="shiny.html"><span class="header-section-number">17</span> Shiny apps</a></li>
<li><a class="" href="non-software.html"><span class="header-section-number">18</span> Non-Software Packages</a></li>
<li><a class="" href="gitignore.html"><span class="header-section-number">19</span> The .gitignore file</a></li>
<li><a class="" href="conclusion.html"><span class="header-section-number">20</span> Conclusion</a></li>
<li class="book-part">Bioconductor Package Maintenance</li>
<li><a class="" href="package-maintenance.html">Overview</a></li>
<li><a class="" href="git-version-control.html"><span class="header-section-number">21</span> Git Version Control</a></li>
<li><a class="" href="versionnum.html"><span class="header-section-number">22</span> Version Numbering</a></li>
<li><a class="" href="troubleshooting-build-report.html"><span class="header-section-number">23</span> Troubleshooting Build Report</a></li>
<li><a class="" href="debugging-cc-code.html"><span class="header-section-number">24</span> Debugging C/C++ code</a></li>
<li><a class="" href="deprecation.html"><span class="header-section-number">25</span> Deprecation Guidelines</a></li>
<li><a class="" href="package-end-of-life-policy.html"><span class="header-section-number">26</span> Package End of Life Policy</a></li>
<li><a class="" href="branch-rename-faqs.html"><span class="header-section-number">27</span> Branch Rename FAQs</a></li>
<li class="book-part">Package Reviewer Resources</li>
<li><a class="" href="reviewer-resources-overview.html">Overview</a></li>
<li><a class="" href="review-expectation.html"><span class="header-section-number">28</span> Review Expectations</a></li>
<li><a class="" href="reviewtools.html"><span class="header-section-number">29</span> Reviewer Resources and Tools</a></li>
<li><a class="" href="review-volunteer-chapter.html"><span class="header-section-number">30</span> Volunteer to Review</a></li>
<li class="book-part">Appendix</li>
<li><a class="" href="use-devel.html"><span class="header-section-number">A</span> Using the ‘Devel’ Version of Bioconductor</a></li>
<li><a class="" href="long-tests.html"><span class="header-section-number">B</span> Long Tests</a></li>
<li><a class="" href="querying-web-resources.html"><span class="header-section-number">C</span> Querying Web Resources</a></li>
<li><a class="" href="c-fortran.html"><span class="header-section-number">D</span> C and Fortran code</a></li>
<li><a class="" href="cmavericks-best-practices.html"><span class="header-section-number">E</span> C++/Mavericks Best Practices</a></li>
<li><a class="" href="man-links.html"><span class="header-section-number">F</span> Debug: Links in Rd files</a></li>
<li><a class="" href="booknews.html"><span class="header-section-number">G</span> NEWS</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/Bioconductor/pkgrevdocs">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="shiny" class="section level1" number="17">
<h1>
<span class="header-section-number">17</span> Shiny apps<a class="anchor" aria-label="anchor" href="#shiny"><i class="fas fa-link"></i></a>
</h1>
<p><a href="https://shiny.rstudio.com/">Shiny apps</a> can be submitted to <em>Bioconductor</em> as software packages or as documented and tested functions within packages.</p>
<div id="code-organisation" class="section level2" number="17.1">
<h2>
<span class="header-section-number">17.1</span> Code organisation<a class="anchor" aria-label="anchor" href="#code-organisation"><i class="fas fa-link"></i></a>
</h2>
<p>Shiny apps are divided into two parts:</p>
<ul>
<li>User interface (UI)</li>
<li>Server</li>
</ul>
<p>Shiny apps submitted to <em>Bioconductor</em> must store the <i class="fab fa-r-project"></i> code for both the UI and server code under the <code>R/</code> directory of the package.</p>
<p>The bulk of the package code should <em>not</em> be implemented directly within the <code>shinyApp()</code> function call.
Instead, internal package functions should be developed to produce and return individual components of the UI and server sides of the Shiny app.</p>
<p>We recommend the following file naming scheme for source files:</p>
<ul>
<li>Place internal functions that create observers – e.g., <code><a href="https://shiny.rstudio.com/reference/shiny/latest/observeEvent.html">shiny::observeEvent()</a></code> – in files named <code>observers_*.R</code>.
Do this both for observers reacting to the Shiny server <code>input</code> object, and reactive values stored in lists of reactive values (e.g., <code><a href="https://shiny.rstudio.com/reference/shiny/latest/reactiveValues.html">shiny::reactiveValues()</a></code>).</li>
<li>Place internal functions that create UI elements – e.g., <code><a href="https://shiny.rstudio.com/reference/shiny/latest/checkboxInput.html">shiny::checkboxInput()</a></code> – in files named <code>interface_*.R</code>.</li>
<li>Place internal functions that update the Shiny server <code>output</code> object in files named <code>outputs_*.R</code>.</li>
<li>Place internal functions that perform miscellaneous processing steps in files named <code>utils_*.R</code>.</li>
</ul>
</div>
<div id="running-app" class="section level2" number="17.2">
<h2>
<span class="header-section-number">17.2</span> Running app<a class="anchor" aria-label="anchor" href="#running-app"><i class="fas fa-link"></i></a>
</h2>
<p>Functions in the package should <em>return</em> Shiny apps, but <em>not</em> launch them.</p>
<p>In other words, the function <code><a href="https://shiny.rstudio.com/reference/shiny/latest/runApp.html">shiny::runApp()</a></code> should not be found anywhere in the package source code.
Instead, users should be left to call that function, using Shiny app objects returned by the package functions and options that control how the app is run (e.g., <code>launch.browser = TRUE</code>).</p>
<p>For instance, the package source code should look as follows:</p>
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">build_app</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">...</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">ui</span> <span class="op">&lt;-</span> <span class="fu">.build_ui</span><span class="op">(</span><span class="va">...</span><span class="op">)</span></span>
<span>  <span class="va">server</span> <span class="op">&lt;-</span> <span class="fu">.build_server</span><span class="op">(</span><span class="va">...</span><span class="op">)</span></span>
<span>  <span class="va">app</span> <span class="op">&lt;-</span> <span class="fu">shinyApp</span><span class="op">(</span>ui <span class="op">=</span> <span class="va">ui</span>, server <span class="op">=</span> <span class="va">server</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>While the user’s code should look as follows:</p>
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">app</span> <span class="op">&lt;-</span> <span class="fu">build_app</span><span class="op">(</span><span class="va">...</span><span class="op">)</span></span>
<span><span class="fu">shiny</span><span class="fu">::</span><span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/runApp.html">runApp</a></span><span class="op">(</span><span class="va">app</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div>
</div>
<div id="building-the-package" class="section level2" number="17.3">
<h2>
<span class="header-section-number">17.3</span> Building the package<a class="anchor" aria-label="anchor" href="#building-the-package"><i class="fas fa-link"></i></a>
</h2>
<p><em>Coming soon: comments on build issues for packages that contain Shiny apps.</em></p>
</div>
<div id="testing" class="section level2" number="17.4">
<h2>
<span class="header-section-number">17.4</span> Testing<a class="anchor" aria-label="anchor" href="#testing"><i class="fas fa-link"></i></a>
</h2>
<p>All functions in the package should be testable using standard unit testing tools (e.g., <em><a href="https://CRAN.R-project.org/package=testthat">testthat</a></em>).</p>
<p>The use of <code># nocov start</code> and <code># nocov end</code> is allowed to ignore part of the code that cannot be tested using traditional unit tests (e.g., <code>observeEvent</code>).</p>
<p>For instance:</p>
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># nocov start</span></span>
<span><span class="fu">observeEvent</span><span class="op">(</span><span class="va">input</span><span class="op">$</span><span class="va">example_input</span>, <span class="op">{</span></span>
<span>    <span class="co"># &lt;do something&gt;</span></span>
<span><span class="op">}</span><span class="op">)</span></span>
<span><span class="co"># nocov end</span></span></code></pre></div>
<p>Use files <code>setup-*.R</code> in the subdirectory <code>tests/testthat/</code> to generate only once objects that are used repeatedly as input for the unit tests.</p>
</div>
<div id="documentation" class="section level2" number="17.5">
<h2>
<span class="header-section-number">17.5</span> Documentation<a class="anchor" aria-label="anchor" href="#documentation"><i class="fas fa-link"></i></a>
</h2>
<p>Man pages documenting functions that return Shiny apps should use the <code><a href="https://rdrr.io/r/base/interactive.html">interactive()</a></code> function to demonstrate usage of the app.</p>
<p>For instance, a typical ‘Example’ section for such a man page should look as follows:</p>
<div class="sourceCode" id="cb34"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">MyShinyPackage</span><span class="op">)</span></span>
<span></span>
<span><span class="va">app</span> <span class="op">&lt;-</span> <span class="fu">build_app</span><span class="op">(</span><span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/interactive.html">interactive</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu">shiny</span><span class="fu">::</span><span class="fu"><a href="https://shiny.rstudio.com/reference/shiny/latest/runApp.html">runApp</a></span><span class="op">(</span><span class="va">app</span>, <span class="va">...</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>Although optional, we highly recommend documenting internal functions of packages that contain Shiny apps.
We recommend doing so in a way that is visible to developers but not users:</p>
<ul>
<li>Create man pages named <code>man/INTERNAL_*.Rd</code>
<ul>
<li>If using <em><a href="https://CRAN.R-project.org/package=roxygen2">roxygen2</a></em>, use the tag-value <code>@rdname INTERNAL_name_of_function</code>.</li>
</ul>
</li>
<li>In the file <code>man/.gitignore</code> (create it if it does not exist), add the line <code>INTERNAL_*</code>
</li>
</ul>
<p>For instance:</p>
<div class="sourceCode" id="cb35"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#' @rdname INTERNAL_build_app</span></span>
<span><span class="va">.build_app</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">...</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">...</span></span>
<span><span class="op">}</span></span></code></pre></div>
</div>
<div id="review" class="section level2" number="17.6">
<h2>
<span class="header-section-number">17.6</span> Review<a class="anchor" aria-label="anchor" href="#review"><i class="fas fa-link"></i></a>
</h2>
<p><em>Coming soon: comments on reviewing packages that contain Shiny apps (e.g., points raised during the review process).</em></p>

</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="other-than-Rcode.html"><span class="header-section-number">16</span> Fortran / C / C++ / Python / Third-Party Code</a></div>
<div class="next"><a href="non-software.html"><span class="header-section-number">18</span> Non-Software Packages</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#shiny"><span class="header-section-number">17</span> Shiny apps</a></li>
<li><a class="nav-link" href="#code-organisation"><span class="header-section-number">17.1</span> Code organisation</a></li>
<li><a class="nav-link" href="#running-app"><span class="header-section-number">17.2</span> Running app</a></li>
<li><a class="nav-link" href="#building-the-package"><span class="header-section-number">17.3</span> Building the package</a></li>
<li><a class="nav-link" href="#testing"><span class="header-section-number">17.4</span> Testing</a></li>
<li><a class="nav-link" href="#documentation"><span class="header-section-number">17.5</span> Documentation</a></li>
<li><a class="nav-link" href="#review"><span class="header-section-number">17.6</span> Review</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/Bioconductor/pkgrevdocs/blob/master/shiny-apps.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/Bioconductor/pkgrevdocs/edit/master/shiny-apps.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Bioconductor Packages: Development, Maintenance, and Peer Review</strong>" was written by Kevin Rue-Albrecht, Daniela Cassol, Johannes Rainer, Lori Shepherd. It was last built on 2023-03-23.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
